전자도서관 통합검색
===================

각 자치단체들은 도서관을 운영하고 있으며 이를 합치면 수백개에 이릅니다.
각 도서관의 보유서적 목록은 정부차원에서 관리되어 서로 검색가능합니다.

이러한 자치단체들이 이제는 전자도서관을 구축하고 있고, 거기에 회사나 아파트단지들에서 운영하는 것까지 하면 이미 수백개에 이릅니다.
몇몇 도서관들은 사용자 제한을 걸고 있지만, 다행히 아직까지는 자유롭게 이용이 가능합니다.

전자책으로 출간된 서적의 수가 극히 제한적인 상황에서 그나마 있는 자료라도 효율적으로 써야하겠다는 생각에 이러한 통합검색 도구를 만들게 되었습니다.
(안드로이드 경우 리브로피아라는 북큐브 통합검색 앱이 있기는 하더군요.)

전자도서관 목록들은 [이북카페](http://cafe.naver.com/ebook/139134)에서 확인 바랍니다.

전자도서관 사업자들
===================

전자책 판매쪽도 대형서점(교보문고)/출판사(KPC)/인터넷서점(한국이퍼브)의 기싸움에 포맷이 통일안되고 있지만,
전자도서관쪽은 포맷통일 안된건 더 합니다(북큐브/에피루스/교보/메키아(구 북토피아)/yes24/OPMS).

도서관 시스템 구축은 꼭 공급업자가 할 필요는 없어 서로 검색결과의 호환이 되진 않지만, 
다행히(?) 몇몇 공급업자들의 플랫폼이 널리 쓰이고 있습니다.
도서관들의 구성을 살펴보면 2강 1중의 점유율을 보이고 있는걸 알수 있죠.

우선 [다산지앤지](http://bookplayer.dasangng.co.kr)로 북큐브와 협력관계입니다(사실 대표가 같습니다).
관련 도서관들의 주소는 FxLibrary로 끝나는 경우가 대부분입니다.
(platform: bookcube)

두번째는 [디지털교보](http://digital.kyobobook.co.kr/digital/library/libraryMain.ink)입니다. 교보말고도 다른 포맷의 도서관 구축에도 쓰이고 있습니다.
(platform: kyobo)

세번째는 [우리전자책](http://wooriebook.com)로 에피루스와 협력관계입니다.
yes24의 일부 서점이 사용하고 있습니다.
(platform: woori)

그외 경기도, 서울시교육청, 울산 등의 돈많은 광역체들은 자체 시스템을 구축하고 있어서 비록 장서가 많음에도 호환되게 만들기 어렵습니다.

사용법
===================

PHP가 지원되는 웹서버의 문서디렉토리에 압축파일을 디렉토리에 풀고(예: koelib), 
웹브라우저로 디렉토리의 index.html 을 열면 됩니다.

PHP 지원되는 웹서버가 없다면 
* [XAMPP](http://www.apachefriends.org/en/xampp.html)
* [apmsetup](http://www.apmsetup.com)
* [autoset](http://www.autoset.net)
* QuickPHP
등을 사용하시면 쉽게 서버구축이 가능합니다.

도서관 정보는 koelib.xml 에 XML로 기록되어 있습니다. 
자주 사용하는 도서관이나 비공개 도서관중 가입된 곳이 있다면 관련 정보를 myelib.xml에 넣어서 편집하면 됩니다.

소스코드
===================

## 검색기
* search.php: XML로 넘어오는 검색결과를 테이블로 만듬.
            현재는 페이지당 4개의 도서관을 검색 (조절가능)
* query_*.php: 각 도서관을 검색 (parse 호출)
* parse_*.php: 도서관 출력 페이지를 파싱하여 결과를 XML로 넘김
* kolistnet.php: [국가자료공동목록시스템](http://http://www.nl.go.kr/kolisnet/)

## 도서관
* *_bookcube: 북큐브
* *_kyobo*: 교보 계열
* *_type3: (이름을 모르는 전자도서관 사업회사 1)
* *_woori: 우리전자책
* sen: [서울시 교육청 통합 전자도서관](http://e-lib.sen.go.kr)
* golibrary: [경기도 사이버 도서관](http://golibrary.go.kr)
* gmhlib: [광명시 중앙도서관](http://ebook.gmhlib.or.kr)
* gangnam: [강남구](http://ebook.gangnam.go.kr)

## 구현설명

* bookcube: XML로 검색결과가 넘어와 이를 XML로 다시 가공
* kyobo*,woori,type3: HTML을 파싱하여 XML로 만듬
* kyobo,kyobo1,kyobo2는 검색 URL 형식은 동일하나 출력 페이지 구조가 다름.

개선되야 할 점
===================

* HTML 출력 도서관의 멀티페이지 검색결과 처리
* 개수는 적지만 규모가 큰 도서관은 검색에 포함
* multi-thread를 이용한 병렬 도서관 검색

배포 및 수정
===================

이 코드들은 [GPLv3 라이센스](http://www.gnu.org/licenses/gpl-3.0.html)로 배포됩니다. 
즉 사용이나 배포를 맘대로 하시고 단 코드가 수정이 되었을 때는 "꼭" 공개를 해야 합니다.
